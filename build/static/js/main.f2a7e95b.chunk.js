(this.webpackJsonplitehaus=this.webpackJsonplitehaus||[]).push([[0],{12:function(e,t,n){e.exports={header:"SymbolList_header__zmnWx",name:"SymbolList_name__3eHgi",industry:"SymbolList_industry__1-Vab",price:"SymbolList_price__30TDj",marketCap:"SymbolList_marketCap__2E3-8",exchange:"SymbolList_exchange__suj9K",wideOnly:"SymbolList_wideOnly__3nWV5"}},13:function(e,t,n){e.exports={form:"Search_form__3I7DF",label:"Search_label__22ZlC",input:"Search_input__yx45c",inputShowing:"Search_inputShowing__1CQBw",results:"Search_results__337JL",hidden:"Search_hidden__1OLbk",symbol:"Search_symbol__1wopD",description:"Search_description__1Kt6O",button:"Search_button__dnbUm"}},14:function(e,t,n){e.exports={container:"SymbolListItem_container__HSQyM",name:"SymbolListItem_name__1EE8o",industry:"SymbolListItem_industry__39b70",price:"SymbolListItem_price__AuHrR",marketCap:"SymbolListItem_marketCap__DRl7h",exchange:"SymbolListItem_exchange__1rWrz",wideOnly:"SymbolListItem_wideOnly__luaOC"}},16:function(e,t,n){e.exports={wrapper:"LandingPage_wrapper__JJx7U",container:"LandingPage_container__2e1Ue",logo:"LandingPage_logo__3HgNY",title:"LandingPage_title__vhYRb",subtitle:"LandingPage_subtitle__2M4in",button:"LandingPage_button__1vqrR",chevron:"LandingPage_chevron__25dEy"}},3:function(e,t,n){e.exports={wrapper:"SignUpPage_wrapper__1Mk99",title:"SignUpPage_title__3sUHN",titleLink:"SignUpPage_titleLink__owgoQ",form:"SignUpPage_form__1fFrI",header:"SignUpPage_header__1Wgib",label:"SignUpPage_label__2KzrN",input:"SignUpPage_input__3b9JG",inputMissing:"SignUpPage_inputMissing__3o8he",button:"SignUpPage_button__1frNh",signinText:"SignUpPage_signinText__2T9Te",signinLink:"SignUpPage_signinLink__33UK4",logo:"SignUpPage_logo__1Pqeb"}},34:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(25),i=n.n(c),r=(n(34),n(5)),o=n(28),l=n(2),u=n.p+"static/media/lighthouse.7060a04e.svg",d=n(18),b=n(16),p=n.n(b),h=n(0),j=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],c=n?Object(h.jsx)(d.a,{className:p.a.chevron}):Object(h.jsx)(d.c,{className:p.a.chevron});return Object(h.jsxs)("main",{className:p.a.wrapper,children:[Object(h.jsx)("img",{className:p.a.logo,src:u,alt:"A cartoon lighthouse"}),Object(h.jsxs)("div",{className:p.a.container,children:[Object(h.jsx)("h1",{className:p.a.title,children:"Litehaus"}),Object(h.jsx)("p",{className:p.a.subtitle,children:"Keep an eye on your favourite stocks."}),Object(h.jsxs)("a",{className:p.a.button,href:"/signin",onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:["Sign in",c]})]})]})},m=n(8),g=n.n(m),_=n(15),O=n(6),x=n.n(O),f=function(e){var t=e.setLoggedIn,n=Object(a.useState)(""),s=Object(r.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(""),d=Object(r.a)(o,2),b=d[0],p=d[1],j=Object(a.useRef)(null),m=Object(a.useRef)(null),O=Object(l.g)(),f=function(){var e=!0;return document.getElementById("passwordLabel").classList.remove("".concat(x.a.inputMissing)),document.getElementById("emailLabel").classList.remove("".concat(x.a.inputMissing)),0===b.length&&(e=!1,m.current.focus(),document.getElementById("passwordLabel").classList.add("".concat(x.a.inputMissing))),0===c.length&&(e=!1,j.current.focus(),document.getElementById("emailLabel").classList.add("".concat(x.a.inputMissing))),e},y=function(){var e=Object(_.a)(g.a.mark((function e(n){var a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!f()){e.next=11;break}return e.next=4,fetch("".concat("https://litehaus-api.herokuapp.com","/api/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c,password:b})});case 4:return a=e.sent,e.next=7,a.json();case 7:s=e.sent,t(!!s.success),localStorage.setItem("accessToken",s.token),O.push(s.success?"/dashboard":"/signin");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("main",{className:x.a.wrapper,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:x.a.title,children:Object(h.jsx)("a",{className:x.a.titleLink,href:"/",children:"Litehaus"})}),Object(h.jsx)("img",{className:x.a.logo,src:u,alt:"A cartoon lighthouse"})]}),Object(h.jsxs)("form",{className:x.a.form,children:[Object(h.jsx)("h2",{className:x.a.header,children:"Sign In"}),Object(h.jsxs)("label",{ref:j,className:x.a.label,children:[Object(h.jsx)("p",{id:"emailLabel",children:"Email"}),Object(h.jsx)("input",{autoFocus:!0,className:x.a.input,onChange:function(e){return i(e.target.value)}})]}),Object(h.jsxs)("label",{className:x.a.label,children:[Object(h.jsx)("p",{id:"passwordLabel",children:"Password"}),Object(h.jsx)("input",{ref:m,className:x.a.input,type:"password",onChange:function(e){return p(e.target.value)}})]}),Object(h.jsx)("button",{className:x.a.button,onClick:function(e){return y(e)},children:"Continue"}),Object(h.jsxs)("p",{className:x.a.signupText,children:["Don't have an account? ",Object(h.jsx)("a",{className:x.a.signupLink,href:"/signup",children:"Sign Up"})]})]})]})},y=n(3),S=n.n(y),N=function(e){var t=e.setLoggedIn,n=Object(a.useState)(""),s=Object(r.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(""),d=Object(r.a)(o,2),b=d[0],p=d[1],j=Object(a.useState)(""),m=Object(r.a)(j,2),O=m[0],x=m[1],f=Object(a.useRef)(null),y=Object(a.useRef)(null),N=Object(a.useRef)(null),v=Object(l.g)(),w=function(){var e=!0;return document.getElementById("passwordLabel").classList.remove("".concat(S.a.inputMissing)),document.getElementById("emailLabel").classList.remove("".concat(S.a.inputMissing)),document.getElementById("nameLabel").classList.remove("".concat(S.a.inputMissing)),0===O.length&&(e=!1,N.current.focus(),document.getElementById("passwordLabel").classList.add("".concat(S.a.inputMissing))),0===b.length&&(e=!1,y.current.focus(),document.getElementById("emailLabel").classList.add("".concat(S.a.inputMissing))),0===c.length&&(e=!1,f.current.focus(),document.getElementById("nameLabel").classList.add("".concat(S.a.inputMissing))),e},L=function(){var e=Object(_.a)(g.a.mark((function e(n){var a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!w()){e.next=17;break}return e.prev=2,e.next=5,fetch("".concat("https://litehaus-api.herokuapp.com","/api/register"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,email:b,password:O})});case 5:return a=e.sent,e.next=8,a.json();case 8:s=e.sent,t(!!s.success),localStorage.setItem("accessToken",s.token),v.push(s.success?"/dashboard":"/signup"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("main",{className:S.a.wrapper,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:S.a.title,children:Object(h.jsx)("a",{className:S.a.titleLink,href:"/",children:"Litehaus"})}),Object(h.jsx)("img",{className:S.a.logo,src:u,alt:"A cartoon lighthouse"})]}),Object(h.jsxs)("form",{className:S.a.form,children:[Object(h.jsx)("h2",{className:S.a.header,children:"Sign Up"}),Object(h.jsxs)("label",{ref:f,className:S.a.label,children:[Object(h.jsx)("p",{id:"nameLabel",children:"Name"}),Object(h.jsx)("input",{autoFocus:!0,className:S.a.input,onChange:function(e){return i(e.target.value)}})]}),Object(h.jsxs)("label",{ref:y,className:S.a.label,children:[Object(h.jsx)("p",{id:"emailLabel",children:"Email"}),Object(h.jsx)("input",{className:S.a.input,onChange:function(e){return p(e.target.value)}})]}),Object(h.jsxs)("label",{ref:N,className:S.a.label,children:[Object(h.jsx)("p",{id:"passwordLabel",children:"Password"}),Object(h.jsx)("input",{className:S.a.input,type:"password",onChange:function(e){return x(e.target.value)}})]}),Object(h.jsx)("button",{className:S.a.button,onClick:function(e){return L(e)},children:"Continue"}),Object(h.jsxs)("p",{className:S.a.signinText,children:["Already have an account? ",Object(h.jsx)("a",{className:S.a.signinLink,href:"/signin",children:"Sign In"})]})]})]})},v=n(7),w=n.n(v),L=n(29),k=n(13),I=n.n(k),P=function(e){var t=e.updateSymbols,n=e.currentSymbols,s=Object(a.useState)(null),c=Object(r.a)(s,2),i=c[0],o=c[1],l=function(){var e=Object(_.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://finnhub.io/api/v1/search?q=".concat(t,"&token=").concat("c1prugqad3icph06qtf0"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=Object(L.a)(l,250),d=function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:n=e.sent,0===t.length?o(null):o(n.result);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("form",{className:I.a.form,children:[Object(h.jsx)("label",{className:I.a.label,children:"Search"}),Object(h.jsx)("input",{className:"".concat(I.a.input," ").concat(i&&i.length>0?I.a.inputShowing:""),onChange:function(e){return d(e.target.value)}}),Object(h.jsx)("ul",{className:i?I.a.results:I.a.hidden,children:i?i.map((function(e,a){return Object(h.jsxs)("li",{children:[Object(h.jsx)("p",{className:I.a.symbol,children:e.displaySymbol})," ",Object(h.jsx)("p",{className:I.a.description,children:e.description})," ",Object(h.jsx)("button",{className:I.a.button,onClick:function(n){return t(n,e.displaySymbol)},children:n.split(",").includes(e.displaySymbol)?"-":"+"})]},a)})):Object(h.jsx)(h.Fragment,{})})]})},D=n(12),T=n.n(D),C=n(14),E=n.n(C),M=function(e){var t=e.symbol,n=Object(a.useState)({symbol:t,name:"",industry:"",price:"",marketCap:"",exchange:""}),s=Object(r.a)(n,2),c=s[0],i=s[1];return Object(a.useEffect)((function(){(function(){var e=Object(_.a)(g.a.mark((function e(){var n,a,s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://finnhub.io/api/v1/stock/profile2?symbol=".concat(t,"&token=").concat("c1prugqad3icph06qtf0"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.next=8,fetch("https://finnhub.io/api/v1/quote?symbol=".concat(t,"&token=").concat("c1prugqad3icph06qtf0"));case 8:return s=e.sent,e.next=11,s.json();case 11:c=e.sent,i({symbol:t,name:a.name,industry:a.finnhubIndustry,price:c.c?Math.round(100*(c.c+Number.EPSILON))/100:"N/A",marketCap:a.marketCapitalization,exchange:a.exchange});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(h.jsxs)("div",{className:E.a.container,children:[Object(h.jsx)("p",{children:c.symbol}),Object(h.jsx)("p",{className:E.a.name,children:c.name}),Object(h.jsx)("p",{className:"".concat(E.a.wideOnly," ").concat(E.a.industry),children:c.industry}),Object(h.jsx)("p",{className:E.a.price,children:c.price}),Object(h.jsx)("p",{className:"".concat(E.a.wideOnly," ").concat(E.a.marketCap),children:c.marketCap}),Object(h.jsx)("p",{className:"".concat(E.a.wideOnly," ").concat(E.a.exchange),children:c.exchange})]})},U=function(e){var t=e.symbols;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:T.a.header,children:[Object(h.jsx)("p",{children:"Symbol"}),Object(h.jsx)("p",{className:T.a.name,children:"Name"}),Object(h.jsx)("p",{className:"".concat(T.a.wideOnly," ").concat(T.a.industry),children:"Industry"}),Object(h.jsx)("p",{className:T.a.price,children:"Price"}),Object(h.jsx)("p",{className:"".concat(T.a.wideOnly," ").concat(T.a.marketCap),children:"Market Cap"}),Object(h.jsx)("p",{className:"".concat(T.a.wideOnly," ").concat(T.a.exchange),children:"Exchange"})]}),Object(h.jsx)("div",{className:T.a.list,children:t.map((function(e,t){return Object(h.jsx)(M,{symbol:e},t)}))})]})},B="https://litehaus-api.herokuapp.com",A=function(e){var t=e.setLoggedIn,n=Object(a.useState)({}),s=Object(r.a)(n,2),c=s[0],i=s[1],o=Object(a.useState)(null),u=Object(r.a)(o,2),b=u[0],p=u[1],j=Object(l.g)();Object(a.useEffect)((function(){var e="Bearer ".concat(localStorage.getItem("accessToken"));fetch("".concat(B,"/api/getSymbols"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",authorization:e}}).then((function(e){return e.json()})).then((function(e){return p(e.symbols)}))}),[]),Object(a.useEffect)((function(){var e="Bearer ".concat(localStorage.getItem("accessToken"));fetch("".concat(B,"/api/user"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",authorization:e}}).then((function(e){return e.json()})).then((function(e){e.success&&i(e.user)}))}),[]);return Object(h.jsxs)("main",{className:w.a.wrapper,children:[Object(h.jsx)("h1",{className:w.a.title,children:"Litehaus"}),Object(h.jsxs)("div",{className:w.a.userDropDown,children:[Object(h.jsxs)("p",{className:w.a.greeting,children:["Hi, ",c.name?c.name.split(" ")[0]:c.name," \ud83d\udc4b"]}),Object(h.jsx)("button",{className:w.a.dropDownArrow,onClick:function(){return function(){var e=document.getElementById(w.a.dropDown);e.style.display="none"===e.style.display?"inline-block":"none"}()},children:Object(h.jsx)(d.b,{})})]}),Object(h.jsxs)("div",{id:w.a.dropDown,style:{display:"none"},children:[Object(h.jsxs)("button",{className:w.a.dropDownButton,children:[Object(h.jsx)("div",{className:w.a.svg,children:Object(h.jsx)(d.d,{})}),Object(h.jsx)("p",{children:"Account Settings"})]}),Object(h.jsxs)("button",{className:w.a.dropDownButton,onClick:function(){fetch("".concat(B,"/api/reset_refresh_token"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("accessToken",""),t(!1),j.push("/")}))},children:[Object(h.jsx)("div",{className:w.a.svg,children:Object(h.jsx)(d.e,{})}),Object(h.jsx)("p",{children:"Logout"})]})]}),Object(h.jsxs)("div",{className:w.a.content,children:[Object(h.jsxs)("div",{className:w.a.add,children:[Object(h.jsx)("h2",{className:w.a.addTitle,children:"Add a new stock"}),Object(h.jsx)(P,{updateSymbols:function(e,n){e.preventDefault();var a=b?b.split(","):[];a.includes(n)?a=a.filter((function(e){return e!==n})):a.push(n);var s=a.join(",");fetch("".concat(B,"/api/refresh_token"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("accessToken",e.token),t(e.token.length>0);var n="Bearer ".concat(localStorage.getItem("accessToken"));fetch("".concat(B,"/api/setSymbols"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",authorization:n},body:JSON.stringify({symbols:s})}).then((function(e){return e.json()})).then((function(e){return p(e.user.symbols)}))}))},currentSymbols:b})]}),Object(h.jsxs)("div",{className:w.a.list,children:[Object(h.jsx)("h2",{className:w.a.watching,children:"Stocks you're watching"}),Object(h.jsx)(U,{symbols:b?b.split(","):[]})]})]})]})};var q=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){fetch("".concat("https://litehaus-api.herokuapp.com","/api/refresh_token"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("accessToken",e.token),s(e.token.length>0)}))}),[]),Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(o.a,{children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{exact:!0,path:"/",children:n?Object(h.jsx)(l.a,{to:"/dashboard"}):Object(h.jsx)(j,{})}),Object(h.jsx)(l.b,{path:"/signin",children:n?Object(h.jsx)(l.a,{to:"/dashboard"}):Object(h.jsx)(f,{setLoggedIn:s})}),Object(h.jsx)(l.b,{path:"/signup",children:n?Object(h.jsx)(l.a,{to:"/dashboard"}):Object(h.jsx)(N,{setLoggedIn:s})}),Object(h.jsx)(l.b,{path:"/dashboard",children:n?Object(h.jsx)(A,{setLoggedIn:s}):Object(h.jsx)(l.a,{to:"/signin"})})]})})})};i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(q,{})}),document.getElementById("root"))},6:function(e,t,n){e.exports={wrapper:"SignInPage_wrapper__3HZp7",title:"SignInPage_title__1wXqD",titleLink:"SignInPage_titleLink__3Dmz8",form:"SignInPage_form__39VLG",header:"SignInPage_header__hi6de",label:"SignInPage_label__1copQ",input:"SignInPage_input__1sdAU",inputMissing:"SignInPage_inputMissing__werc2",button:"SignInPage_button__3n4qJ",signupText:"SignInPage_signupText__3ySiL",signupLink:"SignInPage_signupLink__YoGJC",logo:"SignInPage_logo__bMlpX"}},7:function(e,t,n){e.exports={wrapper:"Dashboard_wrapper__2wu6K",title:"Dashboard_title__ZTrb4",content:"Dashboard_content__3buIT",add:"Dashboard_add__1beEz",addTitle:"Dashboard_addTitle__2ZD6w",watching:"Dashboard_watching__3La3a",userDropDown:"Dashboard_userDropDown__jaR9d",greeting:"Dashboard_greeting__1ITKk",dropDownArrow:"Dashboard_dropDownArrow__34SU7",dropDown:"Dashboard_dropDown__9aelp",svg:"Dashboard_svg__3aCV8",dropDownButton:"Dashboard_dropDownButton__1FbL7"}}},[[42,1,2]]]);
//# sourceMappingURL=main.f2a7e95b.chunk.js.map